CC = gcc
CFLAGS = -Wall -MMD -std=c99 -g -Werror
BIN = rhuff
SRCS = huff.c tree.c io.c rle_encode.c rle_decode.c common.c
OBJS = ${SRCS:.c=.o}
# These are generated by -MMD flag
DEPS = ${SRCS:.c=.d}

${BIN}: ${OBJS}
	${CC} ${CFLAGS} -o ${BIN} ${OBJS}

.PHONY: test
test:
	./test.sh

clean:
	@rm -f huff ${OBJS} ${DEPS}

-include ${DEPS}
